import{a as u,j as t,E as p,u as g,r as j}from"./index-CVCVjE6E.js";import{T as w}from"./TabSheet-Dp7iRcLI.js";import{N as v}from"./NoteFingerChart-BLjkGVr3.js";function N(){const r=u();return t.jsxs("div",{className:"bordered flex col mr",children:[r.fingering.slice().reverse().map((n,e)=>t.jsx(C,{scale:.7,children:n},`${r.id}-${n}-${e}`)),t.jsx(E,{})]})}function C({children:r,background:n="white",color:e="black",scale:s=1}){return t.jsxs("svg",{height:100*s,width:100*s,xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("circle",{r:45*s,cx:50*s,cy:50*s,fill:n}),t.jsx("text",{x:50*s,y:60*s,fontSize:30*s,textAnchor:"middle",fill:e,children:r})]})}function E({stroke:r="white",fill:n="white",scale:e=1}){return t.jsx("svg",{height:100*e,width:100*e,version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("rect",{x:35*e,y:30*e,height:30*e,width:30*e,stroke:r,fill:n,strokeWidth:"5"})})}function S(r,n){return r.split(`
`).map(s=>b(s,n))}const b=(r,n)=>r.split(" ").map(e=>{let s=!1,a=null,l=null;return e===""?p:(e.split("").forEach(i=>{const c=parseInt(i);if(c){a=c;return}if(i==="#"){s=!0;return}l=i}),y(n,l,a,s))});function y(r,n,e,s){if(!n)return;const a=n.toUpperCase();let l=r.notes.filter(i=>i.note.toUpperCase()===a);return e&&s?l.find(i=>i.octave===e&&i.sharp):e&&!s?l.find(i=>i.octave===e&&!i.sharp):s?l.find(i=>i.sharp):l[0]}function T(){const{title:r,arrangement:n,setCurrent:e,compositions:s,updateArrangement:a,updateTitle:l}=g(),i=u(),c=j.useRef(),h=o=>{const{value:d}=o.target;$.test(d)&&a(d)},f=o=>{const d=o.target.value,m=s.find(x=>x.id==d);e(m)};return t.jsxs("div",{className:"flex col full-width bordered align-start",children:[t.jsxs("div",{className:"flex row full-width jsb",children:[t.jsx("input",{className:"ml mt",type:"text",style:{width:"50%"},value:r,onChange:o=>l(o.target.value)}),t.jsx("select",{className:"mr",id:"compositions-select",onChange:f,children:s.map(o=>t.jsx("option",{value:o.id,children:o.title},o.id))})]}),t.jsxs("div",{className:"flex row full-width full-height",children:[t.jsx("textarea",{ref:c,className:"margins",style:{height:"60%",width:"45%",borderRadius:"0.5rem"},value:n,onChange:h,onSelect:o=>{console.log("SELECTION",o.target.selectionStart)}}),t.jsx(w,{lines:S(n,i),instrument:i,arrangement:n,index:c.current?.selectionStart})]})]})}const $=/^[a-gA-G0-9\#\s]*$/;function I(){const r=u();return t.jsx("div",{className:"flex row full-width jsb",children:r.notes.map(n=>t.jsx(v,{note:n,scale:.25},`${r.id}-${n.fingering}`))})}const O=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex mb",style:{height:"65vh"},children:[t.jsx(N,{}),t.jsx(T,{})]}),t.jsx(I,{})]});export{O as component};
