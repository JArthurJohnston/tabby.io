import{r as n,j as e,N as p}from"./index-DBqB6T6u.js";import{a as b}from"./index-BGF-hZ7J.js";import{N as u}from"./NoteFingerChart-vrDdgDbs.js";function N(){const[m,d]=n.useState(""),[t,r]=n.useState(""),[a,c]=n.useState([]),l=p,o=s=>{const i=s.target.value;r(i)};return n.useEffect(()=>{const s=i=>{const{lines:h}=i;c(h||[])};b.renderAbc("sheet-music",t,{afterParsing:s,responsive:"resize"})},[t]),e.jsxs("div",{className:"flex col full-width full-height align-start",children:[e.jsxs("div",{className:"flex row full-width full-height",children:[e.jsx("div",{className:"half-width",children:e.jsx("div",{id:"sheet-music"})}),e.jsx(g,{lines:a,className:"half-width",instrument:l})]}),e.jsxs("div",{className:"flex row full-width",style:{height:"35%"},children:[e.jsxs("section",{className:"full-width bt centered flex col",children:[e.jsx("heading",{className:"ml",children:"Editor"}),e.jsx("textarea",{style:{width:"95%",height:"90%"},value:t,onChange:o,onSelect:s=>{}})]}),e.jsxs("section",{className:"flex col jsb bt bl",children:[e.jsx("heading",{className:"ml",children:"Instrument Tabs"}),e.jsx("div",{className:"flex row jsb",style:{height:"89%"},children:l.notes.map(s=>e.jsx(u,{note:s,scale:.25,labelKey:"abc",showLabel:!0},`${l.id}-${s.fingering}`))})]})]})]})}function g({lines:m,className:d="",instrument:t}){return e.jsx("div",{style:{height:"93%",overflowX:"scroll",width:"50vw"},className:`flex col mt ${d}`,children:m.map(({staff:r},a)=>e.jsx("div",{className:"flex row mb",children:r.map(({voices:c})=>c.map(l=>l.map(o=>{const{el_type:s,pitches:i,duration:h}=o;if(s==="note")return i?.map(j=>{const x=t.notes.find(f=>f.abc===j.name);return x?e.jsxs(e.Fragment,{children:[e.jsx(u,{note:x,scale:.15}),h>.125&&e.jsx(v,{})]}):e.jsx("p",{children:"?"})});if(s==="bar")return e.jsx(w,{})})))},`line-${a}`))})}function w(){return e.jsxs("div",{className:"mr",style:{width:"1rem"},children:["|",e.jsx("br",{}),"|",e.jsx("br",{}),"|",e.jsx("br",{}),"|"]})}function v(){return e.jsxs("div",{className:"mr",style:{width:"1rem",textAlign:"center"},children:["-",e.jsx("br",{}),"-",e.jsx("br",{}),"-",e.jsx("br",{}),"-"]})}const E=()=>e.jsx(N,{});export{E as component};
