import{r as u,j as e,R as w,g as N,A as y,u as C}from"./index-DBqB6T6u.js";import{a as S}from"./index-BGF-hZ7J.js";import{N as b,C as h}from"./NoteFingerChart-vrDdgDbs.js";function v(t="*",s="",n={}){const[r,i]=u.useState(null),a={...T,...n};return u.useEffect(()=>{const c=o=>{i(o)};S.renderAbc(t,s,{...a,afterParsing:c})},[s]),r||{lines:[]}}const T={responsive:"resize"};function $({sheetId:t,contents:s=""}){const n=`music-sheet-${t||"default"}`;return v(n,s),e.jsx("div",{style:{width:"50%",overflow:"auto"},children:e.jsx("div",{id:n,style:{flex:1,minWidth:"25rem",height:"90%"}})})}function A({lines:t,className:s="",instrument:n}){return e.jsx("div",{style:{height:"93%",overflowX:"scroll",width:"50%",marginLeft:"1rem"},className:`flex col mt ${s}`,children:t.map(({staff:r},i)=>e.jsx("div",{className:"flex row mb",children:r.map(({voices:a})=>a.map(c=>c.map(o=>{const{el_type:d,pitches:x,duration:l}=o;if(d==="note")return x?.map((m,j)=>{const f=n.notes.find(g=>g.abc===m.name);return f?e.jsxs(w.Fragment,{children:[e.jsx(b,{note:f,scale:.15}),l>.125&&e.jsx(F,{})]},`${m.name}-${j}`):e.jsx("p",{children:"?"},`${m.name}-${j}`)});if(d==="bar")return e.jsx(B,{})})))},`line-${i}`))})}function B(){return e.jsxs("div",{className:"mr",style:{width:"1rem"},children:["|",e.jsx("br",{}),"|",e.jsx("br",{}),"|",e.jsx("br",{}),"|"]})}function F(){return e.jsxs("div",{className:"mr",style:{width:"1rem",textAlign:"center"},children:["-",e.jsx("br",{}),"-",e.jsx("br",{}),"-",e.jsx("br",{}),"-"]})}function O({instrument:t,abcContents:s,title:n}){const{lines:r}=v("*",s,{title:n||"Unknown"});return e.jsx(A,{lines:r,instrument:t,style:{flex:1}})}function p({id:t,value:s,onChange:n,options:r=[],label:i}){return e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:t,children:[i,": "]}),e.jsx("select",{id:t,style:{flex:1},value:s,onChange:n,children:r.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})}function E(){const{compId:t}=N().useParams(),[s,n]=u.useState("both"),{name:r,contents:i,filePath:a}=y.find(l=>l.name===t),{current:c,instruments:o,changeInstrument:d}=C(),x=[...c.notes];return e.jsxs("div",{children:[e.jsxs("div",{id:"compositiom-menu",style:{marginBottom:"1rem",borderBottom:"1px solid #ccc",padding:"0.5rem"},children:[e.jsx(p,{id:"view-select",value:s,onChange:l=>n(l.target.value),options:[{value:"sheet",label:"Sheet Music"},{value:"tabsheet",label:"Tabsheet"},{value:"both",label:"Both"}],label:"View"}),e.jsx(p,{id:"instrument-select",label:"Instrument",onChange:l=>d(l.target.value),options:o.map(l=>({value:l.id,label:l.name}))}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"1rem"},children:"View File"})]}),e.jsx("div",{className:"flex column",style:{minHeight:"65vh"},children:e.jsxs("div",{className:"flex row full-width",children:[(s==="sheet"||s==="both")&&e.jsx($,{contents:i,title:r}),(s==="tabsheet"||s==="both")&&e.jsx(O,{instrument:c,abcContents:i,title:r})]})}),e.jsxs("section",{className:"flex row full-width jsb",style:{height:"15%",borderTop:"1px solid #ccc",marginTop:"1rem",paddingTop:"1rem"},children:[e.jsx("textarea",{style:{minWidth:"20rem",margin:"0.5rem",height:"100%"},className:"flex",value:i}),e.jsxs("div",{className:"flex col fg2",children:[e.jsx("div",{className:"flex row jse",children:x.map((l,m)=>e.jsx(b,{scale:.15,note:l,showLabel:!0},`${m}-${l.fingering}-chart`))}),e.jsxs("div",{className:"flex jse",children:[e.jsxs("div",{className:"flex centered",children:[e.jsx("p",{children:"Covered Hole = "}),e.jsx(h,{scale:.2,fill:"white"})]}),e.jsxs("div",{className:"flex centered",children:[e.jsx("p",{children:"Open Hole = "}),e.jsx(h,{scale:.2,fill:"black"})]}),e.jsxs("div",{className:"flex centered",children:[e.jsx("p",{children:"Half Covered Hole = "}),e.jsx(h,{scale:.2,fill:"grey"})]}),e.jsx("div",{className:"flex centered",children:e.jsx("p",{children:"* = Overblow"})})]})]})]})]})}const R=E;export{R as component};
